- name: check if java is installed
  command: java -version
  register: java_installed_result
  ignore_errors: true

- debug:
    msg: "java is not installed"
  when: java_installed_result is failed

- debug:
    msg: "java is installed"
  when: java_installed_result is success

- name: ensure jdk download path is exist
  file:
    path: "{{ jdk_download_path }}"
    owner: "{{ provision_user }}"
    group: "{{ provision_user }}"
    mode: 0755
    state: directory
  become: yes
  when: java_installed_result is failed

- name: check jdk file is exist
  stat:
    path: " {{ jdk_download_file }}"
  register: jdk_file
  when: java_installed_result is failed

- debug:
    msg: "{{ jdk_file.stat.exists }}"


#- name: download JDK
#  aws_s3:
#    aws_access_key: "{{ aws_access_key }}"
#    aws_secret_key: "{{ aws_secret_key }}"
#    bucket: mimo.packages
#    object: "{{ jdk_s3_url }}"
#    dest: "{{ jdk_download_path }}"
#    mode: get
#  when:
#    - java_installed_result is failed
#    - jdk_file.stat.exists is False